# ğŸ¯ Cursor AI å®Ÿè£…æŒ‡ç¤ºæ›¸

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**å¤§äººå‘ã‘ãƒ»ä¸­ç´šè€…ä»¥ä¸Šè‹±ä¼šè©±ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒªï¼ˆè‡ªåˆ†ç”¨MVPï¼‰**

ç¾åœ¨ã€ãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆæ©Ÿèƒ½ã®ä¿®æ­£ä½œæ¥­ä¸­ã€‚æ¯æ—¥æ–°èã‚µã‚¤ãƒˆã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã¨Daily News Englishãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆæ©Ÿèƒ½ã‚’å®Œå…¨ã«å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒç›®æ¨™ã€‚

---

## ç¾åœ¨ã®çŠ¶æ³ï¼ˆ2026-01-20æ™‚ç‚¹ï¼‰

### å®Œäº†ã—ã¦ã„ã‚‹æ©Ÿèƒ½
- âœ… RareJob DNAè¨˜äº‹ã‚’ä½¿ã£ãŸä¼šè©±ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ©Ÿèƒ½
- âœ… éŸ³å£°èªè­˜ï¼ˆWeb Speech APIï¼‰
- âœ… Notioné€£æºï¼ˆä¼šè©±ãƒ­ã‚°ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä¿å­˜ï¼‰
- âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®åŸºæœ¬æ§‹é€ 

### ç¾åœ¨ã®èª²é¡Œï¼ˆæœ€å„ªå…ˆã‚¿ã‚¹ã‚¯ï¼‰
- âŒ **Daily News Englishãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆæ©Ÿèƒ½ãŒå‹•ä½œã—ã¦ã„ãªã„**
  - æ¯æ—¥æ–°èã‚µã‚¤ãƒˆã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ™‚ã«403 Forbiddenã‚¨ãƒ©ãƒ¼
  - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹å•é¡Œ
  - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆãƒ•ãƒ­ãƒ¼ãŒæœªå®Œæˆ

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 16** (App Router)
- **TypeScript**
- **Tailwind CSS**
- **Web Speech API**ï¼ˆéŸ³å£°èªè­˜ï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **FastAPI** (Python)
- **OpenAI API** (GPT-4o-mini)
- **Notion API**
- **BeautifulSoup** (ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°)

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Notion Database**ï¼ˆRDBä¸ä½¿ç”¨ï¼‰
  - Conversation Logs DB
  - Feedback Logs DB

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
english app/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py              # FastAPIãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ scraper.py           # è¨˜äº‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
â”‚   â”œâ”€â”€ notion_client.py     # Notion APIé€£æº
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ .env                 # ç’°å¢ƒå¤‰æ•°
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx         # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ chat/page.tsx    # ä¼šè©±ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç”»é¢
â”‚   â”‚   â””â”€â”€ signup/page.tsx  # ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.local           # ç’°å¢ƒå¤‰æ•°
â”œâ”€â”€ è¦ä»¶å®šç¾©æ›¸               # è©³ç´°ãªæŠ€è¡“è¦ä»¶
â”œâ”€â”€ README.md
â””â”€â”€ CURSOR_INSTRUCTIONS.md   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ğŸ”¥ æœ€å„ªå…ˆã‚¿ã‚¹ã‚¯: Daily News Englishãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆæ©Ÿèƒ½ã®ä¿®æ­£

### å•é¡Œã®è©³ç´°

#### 1. æ¯æ—¥æ–°èã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã®403ã‚¨ãƒ©ãƒ¼
- **ç¾è±¡**: æ¯æ—¥æ–°èã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨403 Forbidden
- **åŸå› **: User-Agentã‚„ãƒªãƒ•ã‚¡ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ã€Cloudflareç­‰ã®botå¯¾ç­–
- **å¿…è¦ãªå¯¾å¿œ**:
  - User-Agentãƒ˜ãƒƒãƒ€ãƒ¼ã®è¨­å®š
  - ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
  - å¿…è¦ã«å¿œã˜ã¦Selenium/Playwrightã®å°å…¥æ¤œè¨

#### 2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **å¿…è¦ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
  - `POST /lesson/generate` - ãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆ
  - `GET /lesson/{lesson_id}` - ãƒ¬ãƒƒã‚¹ãƒ³å–å¾—
  - `POST /lesson/save` - Notionã¸ä¿å­˜

#### 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
- ãƒ¬ãƒƒã‚¹ãƒ³ç”ŸæˆUIã®å®Ÿè£…
- ç”Ÿæˆã•ã‚ŒãŸãƒ¬ãƒƒã‚¹ãƒ³ã®è¡¨ç¤º
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

---

## å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Ÿè£…ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```python
# backend/scraper.py ã®ä¿®æ­£ä¾‹

import requests
from bs4 import BeautifulSoup
import time
from typing import Optional

class MainichiNewsScraper:
    def __init__(self):
        self.headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            'Accept': 'text/html,application/xhtml+xml',
            'Accept-Language': 'ja,en-US;q=0.9,en;q=0.8',
            'Referer': 'https://mainichi.jp/',
        }
        self.session = requests.Session()
    
    def scrape_article(self, url: str, max_retries: int = 3) -> Optional[dict]:
        """è¨˜äº‹ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãï¼‰"""
        for attempt in range(max_retries):
            try:
                response = self.session.get(url, headers=self.headers, timeout=10)
                response.raise_for_status()
                
                soup = BeautifulSoup(response.content, 'html.parser')
                
                # è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ã¨æœ¬æ–‡ã‚’æŠ½å‡º
                title = soup.find('h1', class_='title')
                content = soup.find('div', class_='main-text')
                
                if title and content:
                    return {
                        'title': title.get_text(strip=True),
                        'content': content.get_text(strip=True),
                        'url': url
                    }
                
            except requests.RequestException as e:
                if attempt < max_retries - 1:
                    time.sleep(2 ** attempt)  # Exponential backoff
                    continue
                raise
        
        return None
```

### FastAPI ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…

```python
# backend/main.py ã«è¿½åŠ 

from fastapi import FastAPI, HTTPException
from pydantic import BaseModel

class LessonGenerateRequest(BaseModel):
    news_url: str

class LessonResponse(BaseModel):
    lesson_id: str
    title: str
    content: str
    questions: list[str]

@app.post("/lesson/generate", response_model=LessonResponse)
async def generate_lesson(request: LessonGenerateRequest):
    """Daily News Englishãƒ¬ãƒƒã‚¹ãƒ³ã‚’ç”Ÿæˆ"""
    try:
        # 1. è¨˜äº‹ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
        scraper = MainichiNewsScraper()
        article = scraper.scrape_article(request.news_url)
        
        if not article:
            raise HTTPException(status_code=400, detail="è¨˜äº‹ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ")
        
        # 2. OpenAI APIã§è³ªå•ã‚’ç”Ÿæˆ
        questions = await generate_questions_from_article(article)
        
        # 3. Notionã«ä¿å­˜
        lesson_id = await save_lesson_to_notion(article, questions)
        
        return LessonResponse(
            lesson_id=lesson_id,
            title=article['title'],
            content=article['content'],
            questions=questions
        )
        
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

```typescript
// frontend/app/lesson/page.tsx

'use client';

import { useState } from 'react';

export default function LessonPage() {
  const [newsUrl, setNewsUrl] = useState('');
  const [lesson, setLesson] = useState<any>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const generateLesson = async () => {
    setLoading(true);
    setError('');
    
    try {
      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/lesson/generate`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ news_url: newsUrl }),
      });
      
      if (!response.ok) {
        throw new Error('ãƒ¬ãƒƒã‚¹ãƒ³ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
      
      const data = await response.json();
      setLesson(data);
      
    } catch (err) {
      setError(err instanceof Error ? err.message : 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="container mx-auto p-8">
      <h1 className="text-3xl font-bold mb-6">Daily News English</h1>
      
      <div className="mb-6">
        <input
          type="url"
          value={newsUrl}
          onChange={(e) => setNewsUrl(e.target.value)}
          placeholder="æ¯æ—¥æ–°èã®è¨˜äº‹URLã‚’å…¥åŠ›"
          className="w-full p-3 border rounded"
        />
        <button
          onClick={generateLesson}
          disabled={loading || !newsUrl}
          className="mt-4 px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"
        >
          {loading ? 'ç”Ÿæˆä¸­...' : 'ãƒ¬ãƒƒã‚¹ãƒ³ã‚’ç”Ÿæˆ'}
        </button>
      </div>
      
      {error && (
        <div className="p-4 bg-red-100 text-red-700 rounded mb-4">
          {error}
        </div>
      )}
      
      {lesson && (
        <div className="bg-white p-6 rounded shadow">
          <h2 className="text-2xl font-bold mb-4">{lesson.title}</h2>
          <div className="mb-6">
            <h3 className="font-bold mb-2">è¨˜äº‹å†…å®¹:</h3>
            <p className="text-gray-700">{lesson.content}</p>
          </div>
          <div>
            <h3 className="font-bold mb-2">è³ªå•:</h3>
            <ul className="list-disc pl-6">
              {lesson.questions.map((q: string, i: number) => (
                <li key={i} className="mb-2">{q}</li>
              ))}
            </ul>
          </div>
        </div>
      )}
    </div>
  );
}
```

---

## ç’°å¢ƒå¤‰æ•°

### Backend (.env)
```bash
OPENAI_API_KEY=your_openai_api_key_here
NOTION_TOKEN=your_notion_integration_token_here
NOTION_CONVERSATION_DB_ID=your_conversation_db_id
NOTION_FEEDBACK_DB_ID=your_feedback_db_id
```

### Frontend (.env.local)
```bash
NEXT_PUBLIC_API_URL=http://localhost:8000
```

---

## é–‹ç™ºãƒ•ãƒ­ãƒ¼

### 1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
```powershell
cd backend
python main.py
```
â†’ http://localhost:8000/docs ã§APIç¢ºèª

### 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
```powershell
cd frontend
npm run dev
```
â†’ http://localhost:3000 ã§ã‚¢ãƒ—ãƒªç¢ºèª

### 3. ãƒ†ã‚¹ãƒˆæ‰‹é †
1. æ¯æ—¥æ–°èã®è¨˜äº‹URLã‚’å–å¾—
2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§URLã‚’å…¥åŠ›
3. ãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ç”Ÿæˆã•ã‚ŒãŸãƒ¬ãƒƒã‚¹ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
5. Notionã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ

### ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼ã®å ´åˆ
```python
# ãƒ­ã‚°å‡ºåŠ›ã‚’è¿½åŠ 
import logging
logging.basicConfig(level=logging.DEBUG)

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç¢ºèª
print(f"Status: {response.status_code}")
print(f"Headers: {response.headers}")
print(f"Content: {response.text[:500]}")
```

### APIæ¥ç¶šã‚¨ãƒ©ãƒ¼ã®å ´åˆ
- CORSã®è¨­å®šã‚’ç¢ºèªï¼ˆFastAPIã®`add_middleware`ï¼‰
- ãƒãƒ¼ãƒˆç•ªå·ã®ç¢ºèªï¼ˆ8000ã¨3000ï¼‰
- ç’°å¢ƒå¤‰æ•°ã®èª­ã¿è¾¼ã¿ç¢ºèª

---

## é‡è¦ãªè¨­è¨ˆæ€æƒ³

1. **ä¼šè©±ã‚’æ­¢ã‚ãªã„**: è¨‚æ­£ã¯ä¼šè©±å¾Œã®ã¿
2. **Notionã«è“„ç©**: ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¯Notionã«ä¿å­˜
3. **ã‚·ãƒ³ãƒ—ãƒ«ãªUI**: å­¦ç¿’æ„Ÿã‚’å‡ºã•ãªã„
4. **éåŒæœŸå‡¦ç†**: è§£æã¯è£ã§å®Ÿè¡Œ

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ©Ÿèƒ½ã®ä¿®æ­£ï¼ˆ403ã‚¨ãƒ©ãƒ¼å¯¾å¿œï¼‰
2. âœ… ãƒ¬ãƒƒã‚¹ãƒ³ç”ŸæˆAPIã®å®Ÿè£…
3. âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIã®å®Ÿè£…
4. âœ… ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
5. â¬œ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–
6. â¬œ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®æ”¹å–„

---

## å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [è¦ä»¶å®šç¾©æ›¸](./è¦ä»¶å®šç¾©æ›¸) - è©³ç´°ãªæŠ€è¡“è¦ä»¶
- [README.md](./README.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- [Notionè¨­å®šæ‰‹é †](./notion_db_setup_instructions.md)

---

## Cursor AIã¸ã®æŒ‡ç¤º

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã ä¸Šã§ã€ä»¥ä¸‹ã®ä½œæ¥­ã‚’é€²ã‚ã¦ãã ã•ã„:

1. **æœ€å„ªå…ˆ**: Daily News Englishãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆæ©Ÿèƒ½ã®å®Ÿè£…
   - `backend/scraper.py` ã®ä¿®æ­£ï¼ˆ403ã‚¨ãƒ©ãƒ¼å¯¾å¿œï¼‰
   - `backend/main.py` ã«ãƒ¬ãƒƒã‚¹ãƒ³ç”Ÿæˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 
   - `frontend/app/lesson/page.tsx` ã®ä½œæˆ

2. **å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹**:
   - æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ã‚‹
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å¿…ãšå®Ÿè£…
   - ãƒ­ã‚°å‡ºåŠ›ã‚’é©åˆ‡ã«è¿½åŠ 
   - TypeScriptã®å‹å®šç¾©ã‚’å³å¯†ã«

3. **ãƒ†ã‚¹ãƒˆ**:
   - å„æ©Ÿèƒ½ã‚’å®Ÿè£…å¾Œã€å¿…ãšå‹•ä½œç¢ºèª
   - ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã‚‚ç¢ºèª

4. **è³ªå•ãŒã‚ã‚Œã°**:
   - ä¸æ˜ç‚¹ã¯å®Ÿè£…å‰ã«ç¢ºèª
   - è¨­è¨ˆåˆ¤æ–­ãŒå¿…è¦ãªå ´åˆã¯ææ¡ˆ

---

**ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Cursor AIã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å«ã‚ã¦ã€å®Ÿè£…ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚**
